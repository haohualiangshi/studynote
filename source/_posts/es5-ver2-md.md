---
title: es5-ver2.md
date: 2017-07-05 17:04:50
tags: [js,变量,作用域]
categories: js教程总结
---

## 变量的操作

1.   在使用引用类型操作时；js不允许直接访问内存的的位置，也就是说不能直接操作对象的内存空间，在操作对象时是操作的对象的引用

     *    复制基本类型的变量值时；会在变量对象上创建一个新值；然后把该值复制到新变量分配的位置上
     *    复制引用类型时：其实是复制的副本的一个指针，该指针的指向与复制对象的指向相同

     函数的参数都是按值传递的；即把函数外部的值复制给函数内部的参数；函数的参数其实就是函数的内部变量；

     2.   变量的检测：基本类型的变量用typeof来检测类型；引用类型的需要使用instanceof来判断是不是一个对象的实例；基本类型的变量使用instanceof返回false；

     ### 执行环境和作用域

     执行环境定义了变量或者函数有权访问的其他数据，每一个执行环境都有一个与之关联的**变量对象** ；当代码在一个环境中执行时，会创建变量对象的一个作用域链。作用域链保证了对执行环境有权访问的所有变量和函数的有序访问。作用域链的前端始终是当前执行代码所在环境的变量对象；如果执行环境是个函数，则将其活动对象作为变量对象，活动对象最开始只包括一个变量，即arguments对象。

     作用域链中的下一个对象来自包含（外部）环境，再下一个变量对象怎来自下一个包含环境；一直延续到全局执行环境；全局执行环境的对象始终都是作用域链的最后一个对象。

     ~~~javascript
     var color="blue";
     function changeColors(){
     	var anotherColor="red";
     	function swapColors(){
     		var tempColor=anotherColor;
     		anotherColor=color;
     		color=tempColor;
     		//三个变量都能访问到
     	}
     	//能访问两个变量
     }
     //只能访问全局变量
     ~~~

     内部函数可以通过作用域链访问外部函数的变量对象

     1.   声明变量：使用var声明的变量会自动添加到最接近的环境中；如果再使用变量前未声明；该变量会被自动添加到全局环境；严格模式下初始化未声明的变量会报错。